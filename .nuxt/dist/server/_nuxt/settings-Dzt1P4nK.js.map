{"version":3,"file":"settings-Dzt1P4nK.js","sources":["../../../../../digital-agency/pages/agency-cms/manage/settings.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div class=\"flex justify-between items-center py-4\">\n          <div class=\"flex items-center space-x-4\">\n            <NuxtLink to=\"/agency-cms/manage\" class=\"text-blue-600 hover:text-blue-500\">\n              <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"></path>\n              </svg>\n            </NuxtLink>\n            <h1 class=\"text-xl font-semibold text-gray-900\">Site Settings</h1>\n          </div>\n          \n          <div class=\"flex items-center space-x-4\">\n            <button @click=\"handleLogout\" class=\"btn-secondary\">Logout</button>\n          </div>\n        </div>\n      </div>\n    </nav>\n\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <!-- Loading State -->\n      <div v-if=\"loading\" class=\"flex justify-center items-center h-64\">\n        <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n\n      <!-- Form -->\n      <form v-else @submit.prevent=\"handleSubmit\" class=\"space-y-8\">\n        <!-- Site Identity -->\n        <div class=\"card p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 mb-6\">Site Identity</h2>\n          \n          <div class=\"space-y-6\">\n            <div class=\"relative\">\n              <input \n                v-model=\"form.siteName\" \n                type=\"text\" \n                placeholder=\" \" \n                class=\"form-input peer\"\n                required\n              >\n              <label class=\"floating-label\">Site Name</label>\n            </div>\n\n            <div class=\"relative\">\n              <input \n                v-model=\"form.siteTagline\" \n                type=\"text\" \n                placeholder=\" \" \n                class=\"form-input peer\"\n                required\n              >\n              <label class=\"floating-label\">Site Tagline</label>\n            </div>\n\n            <ImageUpload \n              v-model=\"form.logo\" \n              label=\"Site Logo (optional)\"\n            />\n\n            <ImageUpload \n              v-model=\"form.favicon\" \n              label=\"Site Favicon (optional)\"\n            />\n          </div>\n        </div>\n\n        <!-- Brand Colors -->\n        <div class=\"card p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 mb-6\">Brand Colors</h2>\n          \n          <div class=\"space-y-4\">\n            <div class=\"flex items-center space-x-4\">\n              <div class=\"relative\">\n                <input \n                  v-model=\"form.primaryColor\" \n                  type=\"color\" \n                  class=\"w-16 h-16 border-2 border-gray-300 rounded-lg cursor-pointer\"\n                >\n              </div>\n              <div class=\"flex-1\">\n                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Primary Color</label>\n                <input \n                  v-model=\"form.primaryColor\" \n                  type=\"text\" \n                  placeholder=\"#6495ed\" \n                  class=\"form-input\"\n                  pattern=\"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$\"\n                >\n              </div>\n            </div>\n            \n            <div class=\"flex items-center space-x-4\">\n              <div class=\"relative\">\n                <input \n                  v-model=\"form.secondaryColor\" \n                  type=\"color\" \n                  class=\"w-16 h-16 border-2 border-gray-300 rounded-lg cursor-pointer\"\n                >\n              </div>\n              <div class=\"flex-1\">\n                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Secondary Color</label>\n                <input \n                  v-model=\"form.secondaryColor\" \n                  type=\"text\" \n                  placeholder=\"#9333ea\" \n                  class=\"form-input\"\n                  pattern=\"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$\"\n                >\n              </div>\n            </div>\n            \n            <p class=\"text-sm text-gray-600\">\n              <strong>Primary:</strong> Used for buttons, links, and main brand elements.<br>\n              <strong>Secondary:</strong> Used for gradients and accent elements to create visual variety.\n            </p>\n          </div>\n        </div>\n\n        <!-- Social Media Links -->\n        <div class=\"card p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 mb-6\">Social Media Links</h2>\n          \n          <div class=\"space-y-4\">\n            <div v-for=\"(value, platform) in socialLinks\" :key=\"platform\" class=\"relative\">\n              <input \n                v-model=\"socialLinks[platform]\" \n                type=\"url\" \n                placeholder=\" \"\n                class=\"form-input peer\"\n              >\n              <label class=\"floating-label capitalize\">{{ platform }} URL</label>\n              <p class=\"text-xs text-gray-500 mt-1\">e.g., https://{{ platform }}.com/yourcompany</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- SEO Settings -->\n        <div class=\"card p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 mb-6\">SEO Settings</h2>\n          \n          <div class=\"space-y-6\">\n            <div class=\"relative\">\n              <textarea \n                v-model=\"form.metaDescription\" \n                placeholder=\" \" \n                rows=\"3\" \n                class=\"form-input resize-none peer\"\n                maxlength=\"160\"\n              ></textarea>\n              <label class=\"floating-label\">Meta Description (160 chars max)</label>\n              <p class=\"text-sm text-gray-500 mt-1\">{{ form.metaDescription.length }}/160 characters</p>\n            </div>\n\n            <div class=\"relative\">\n              <input \n                v-model=\"form.keywords\" \n                type=\"text\" \n                placeholder=\" \" \n                class=\"form-input peer\"\n              >\n              <label class=\"floating-label\">Keywords (comma separated)</label>\n            </div>\n          </div>\n        </div>\n\n        <!-- Contact Settings -->\n        <div class=\"card p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 mb-6\">Global Contact Settings</h2>\n          \n          <div class=\"space-y-6\">\n            <div class=\"relative\">\n              <input \n                v-model=\"form.contactEmail\" \n                type=\"email\" \n                placeholder=\" \" \n                class=\"form-input peer\"\n              >\n              <label class=\"floating-label\">Main Contact Email</label>\n            </div>\n\n            <div class=\"relative\">\n              <input \n                v-model=\"form.contactPhone\" \n                type=\"tel\" \n                placeholder=\" \" \n                class=\"form-input peer\"\n              >\n              <label class=\"floating-label\">Main Contact Phone</label>\n            </div>\n          </div>\n        </div>\n\n        <!-- Save Button -->\n        <div class=\"flex justify-end space-x-4\">\n          <NuxtLink to=\"/agency-cms/manage\" class=\"btn-secondary\">Cancel</NuxtLink>\n          <button \n            type=\"submit\" \n            :disabled=\"saving\"\n            class=\"btn-primary\"\n          >\n            {{ saving ? 'Saving...' : 'Save Settings' }}\n          </button>\n        </div>\n      </form>\n    </div>\n\n    <!-- Success/Error Messages -->\n    <div v-if=\"successMessage\" class=\"fixed top-20 right-4 p-4 bg-green-50 border border-green-200 rounded-lg shadow-xl z-50\">\n      <div class=\"flex items-center\">\n        <svg class=\"w-5 h-5 text-green-400 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n        </svg>\n        <p class=\"text-green-700 font-medium\">{{ successMessage }}</p>\n      </div>\n    </div>\n\n    <div v-if=\"errorMessage\" class=\"fixed top-20 right-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow-xl z-50\">\n      <div class=\"flex items-center\">\n        <svg class=\"w-5 h-5 text-red-400 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n        </svg>\n        <p class=\"text-red-700 font-medium\">{{ errorMessage }}</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { API_ENDPOINTS, buildApiUrl } from '~/constants/api'\n\ndefinePageMeta({\n  middleware: 'auth',\n  layout: false\n})\n\nconst { logout } = useAuth()\nconst { getSiteSettings } = useCMS()\nconst siteSettings = await getSiteSettings()\n\n// Form data\nconst form = reactive({\n  siteName: '',\n  siteTagline: '',\n  logo: '',\n  favicon: '',\n  primaryColor: '#6495ed',\n  secondaryColor: '#9333ea',\n  metaDescription: '',\n  keywords: '',\n  contactEmail: '',\n  contactPhone: ''\n})\n\n// Social links (separate reactive object)\nconst socialLinks = reactive({\n  facebook: '',\n  twitter: '',\n  instagram: '',\n  linkedin: '',\n  youtube: ''\n})\n\n// Component state\nconst loading = ref(true)\nconst saving = ref(false)\nconst successMessage = ref('')\nconst errorMessage = ref('')\n\n// Load existing content\nonMounted(async () => {\n  await loadContent()\n})\n\nconst loadContent = async () => {\n  try {\n    const response = await $fetch(buildApiUrl(API_ENDPOINTS.CMS.SITE_SETTINGS.GET))\n    \n    if (response) {\n      form.siteName = response.siteName || ''\n      form.siteTagline = response.siteTagline || ''\n      form.logo = response.logo || ''\n      form.favicon = response.favicon || ''\n      form.primaryColor = response.primaryColor || '#6495ed'\n      form.secondaryColor = response.secondaryColor || '#9333ea'\n      form.metaDescription = response.metaDescription || ''\n      form.keywords = response.keywords || ''\n      form.contactEmail = response.contactEmail || ''\n      form.contactPhone = response.contactPhone || ''\n      \n      // Parse social links JSON\n      if (response.socialLinks) {\n        try {\n          const links = JSON.parse(response.socialLinks)\n          Object.assign(socialLinks, links)\n        } catch (e) {\n          console.error('Failed to parse social links:', e)\n        }\n      }\n    }\n  } catch (error) {\n    errorMessage.value = 'Failed to load settings'\n    console.error('Failed to load settings:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleSubmit = async () => {\n  saving.value = true\n  successMessage.value = ''\n  errorMessage.value = ''\n\n  try {\n    const payload = {\n      ...form,\n      socialLinks: JSON.stringify(socialLinks)\n    }\n\n    await $fetch(buildApiUrl(API_ENDPOINTS.CMS.SITE_SETTINGS.POST), {\n      method: 'POST',\n      body: payload\n    })\n\n    successMessage.value = 'Site settings updated successfully!'\n  } catch (error) {\n    errorMessage.value = 'Failed to update settings. Please try again.'\n    console.error('Failed to update settings:', error)\n  } finally {\n    saving.value = false\n  }\n}\n\nconst handleLogout = async () => {\n  await logout()\n}\n\n// Clear messages after 5 seconds\nwatch([successMessage, errorMessage], () => {\n  if (successMessage.value || errorMessage.value) {\n    setTimeout(() => {\n      successMessage.value = ''\n      errorMessage.value = ''\n    }, 5000)\n  }\n})\n\n// SEO\nuseSeoMeta({\n  title: `Site Settings | ${siteSettings.siteName} CMS`,\n  robots: 'noindex, nofollow'\n})\n</script>"],"names":["_withAsyncContext","_ssrRenderAttrs","_mergeProps","_push","_parent","_createBlock","_createVNode","_unref","_ssrRenderAttr","_ssrInterpolate"],"mappings":"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"}