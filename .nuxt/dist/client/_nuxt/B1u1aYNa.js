import{_ as N}from"./DbuFvnLP.js";import{m as P,f as V,r as c,p as q,h as O,l as p,A as m,q as H,c as i,a as e,i as x,b as I,w as G,u as n,F as J,k as K,t as u,s as R,v as w,x as _,B as W,o as r,j as X}from"#entry";import{u as Y}from"./b2E7qtaH.js";import{a as Z}from"./BDG_tvSz.js";const ee={class:"min-h-screen bg-gray-50"},te={class:"bg-white shadow-sm border-b"},se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},oe={class:"flex justify-between items-center py-4"},le={class:"flex items-center space-x-4"},ne={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ie={key:0,class:"flex justify-center items-center h-64"},re={key:1,class:"space-y-6"},ae={class:"flex items-start justify-between"},de={class:"flex-1"},ue={class:"flex items-center space-x-3 mb-3"},ce={class:"text-xl font-bold text-gray-900"},ve={key:0,class:"px-2 py-1 bg-gray-200 text-gray-600 text-xs rounded-full"},pe={class:"text-gray-600 mb-4"},me={class:"flex items-center space-x-4 text-sm text-gray-500"},xe={class:"flex items-center space-x-2 ml-4"},he=["onClick"],ge=["onClick"],ye={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},be={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},we=["onClick"],fe={key:0,class:"text-center py-12"},ke={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},_e={class:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Ae={class:"p-6"},Fe={class:"flex justify-between items-center mb-6"},Ce={class:"text-xl font-bold text-gray-900"},Me={class:"relative"},Se={class:"relative"},Qe={class:"grid grid-cols-2 gap-4"},je={class:"relative"},Be={class:"flex items-center space-x-3"},Le={class:"flex justify-end space-x-4 pt-4 border-t"},Te=["disabled"],$e={key:1,class:"fixed top-20 right-4 p-4 bg-green-50 border border-green-200 rounded-lg shadow-xl z-50"},De={class:"flex items-center"},Ee={class:"text-green-700 font-medium"},Ue={key:2,class:"fixed top-20 right-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow-xl z-50"},ze={class:"flex items-center"},Ne={class:"text-red-700 font-medium"},Ie={__name:"faqs",async setup(Pe){let h,A;const{logout:Q}=P(),{getSiteSettings:j}=Y(),B=([h,A]=V(()=>j()),h=await h,A(),h),f=c([]),F=c(!0),g=c(!1),y=c(!1),v=c(null),a=c(""),d=c(""),o=q({question:"",answer:"",order:0,isActive:!0});O(async()=>{await b()});const b=async()=>{try{const s=await $fetch(p(m.CMS.FAQS.GET));f.value=s}catch{d.value="Failed to load FAQs"}finally{F.value=!1}},C=()=>{v.value=null,M(),y.value=!0},L=s=>{v.value=s,o.question=s.question,o.answer=s.answer,o.order=s.order,o.isActive=s.isActive,y.value=!0},k=()=>{y.value=!1,v.value=null,M()},M=()=>{o.question="",o.answer="",o.order=0,o.isActive=!0},T=async()=>{g.value=!0,a.value="",d.value="";try{const s={question:o.question,answer:o.answer,order:o.order,isActive:o.isActive};v.value?(await $fetch(p(m.CMS.FAQS.PUT(v.value.id)),{method:"PUT",body:s}),a.value="FAQ updated successfully!"):(await $fetch(p(m.CMS.FAQS.POST),{method:"POST",body:s}),a.value="FAQ created successfully!"),k(),await b()}catch{d.value="Failed to save FAQ"}finally{g.value=!1}},$=async s=>{try{await $fetch(p(m.CMS.FAQS.PUT(s.id)),{method:"PUT",body:{...s,isActive:!s.isActive}}),a.value=`FAQ ${s.isActive?"deactivated":"activated"} successfully!`,await b()}catch{d.value="Failed to update FAQ status"}},D=async s=>{if(confirm(`Are you sure you want to delete this FAQ: "${s.question}"?`))try{await $fetch(p(m.CMS.FAQS.DELETE(s.id)),{method:"DELETE"}),a.value="FAQ deleted successfully!",await b()}catch{d.value="Failed to delete FAQ"}},E=s=>new Date(s).toLocaleDateString(),U=async()=>{await Q()};return H([a,d],()=>{(a.value||d.value)&&setTimeout(()=>{a.value="",d.value=""},5e3)}),Z({title:`Manage FAQs | ${B.siteName} CMS`,robots:"noindex, nofollow"}),(s,t)=>{const z=N;return r(),i("div",ee,[e("nav",te,[e("div",se,[e("div",oe,[e("div",le,[I(z,{to:"/agency-cms/manage",class:"text-blue-600 hover:text-blue-500"},{default:G(()=>[...t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),t[5]||(t[5]=e("h1",{class:"text-xl font-semibold text-gray-900"},"Manage FAQs",-1))]),e("div",{class:"flex items-center space-x-4"},[e("button",{onClick:C,class:"btn-primary"},"Add FAQ"),e("button",{onClick:U,class:"btn-secondary"},"Logout")])])])]),e("div",ne,[n(F)?(r(),i("div",ie,[...t[6]||(t[6]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(r(),i("div",re,[(r(!0),i(J,null,K(n(f),l=>(r(),i("div",{key:l.id,class:"card p-6"},[e("div",ae,[e("div",de,[e("div",ue,[e("h3",ce,u(l.question),1),l.isActive?x("",!0):(r(),i("span",ve,"Inactive"))]),e("p",pe,u(l.answer),1),e("div",me,[e("span",null,"Order: "+u(l.order),1),t[7]||(t[7]=e("span",null,"â€¢",-1)),e("span",null,"Updated: "+u(E(l.updatedAt)),1)])]),e("div",xe,[e("button",{onClick:S=>L(l),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg"},[...t[8]||(t[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,he),e("button",{onClick:S=>$(l),class:X([l.isActive?"text-yellow-600 hover:bg-yellow-50":"text-green-600 hover:bg-green-50","p-2 rounded-lg"])},[l.isActive?(r(),i("svg",ye,[...t[9]||(t[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"},null,-1)])])):(r(),i("svg",be,[...t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))],10,ge),e("button",{onClick:S=>D(l),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,we)])])]))),128)),n(f).length===0?(r(),i("div",fe,[t[12]||(t[12]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[13]||(t[13]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No FAQs",-1)),t[14]||(t[14]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating your first FAQ.",-1)),e("button",{onClick:C,class:"btn-primary mt-4"},"Add FAQ")])):x("",!0)]))]),n(y)?(r(),i("div",ke,[e("div",_e,[e("div",Ae,[e("div",Fe,[e("h2",Ce,u(n(v)?"Edit FAQ":"Add New FAQ"),1),e("button",{onClick:k,class:"text-gray-400 hover:text-gray-600"},[...t[15]||(t[15]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:R(T,["prevent"]),class:"space-y-6"},[e("div",Me,[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>n(o).question=l),type:"text",placeholder:" ",class:"form-input peer",required:""},null,512),[[_,n(o).question]]),t[16]||(t[16]=e("label",{class:"floating-label"},"Question",-1))]),e("div",Se,[w(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>n(o).answer=l),placeholder:" ",rows:"4",class:"form-input resize-none peer",required:""},null,512),[[_,n(o).answer]]),t[17]||(t[17]=e("label",{class:"floating-label"},"Answer",-1))]),e("div",Qe,[e("div",je,[w(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>n(o).order=l),type:"number",placeholder:" ",class:"form-input peer",min:"0"},null,512),[[_,n(o).order,void 0,{number:!0}]]),t[18]||(t[18]=e("label",{class:"floating-label"},"Display Order",-1))]),e("div",Be,[w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>n(o).isActive=l),type:"checkbox",id:"isActive",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[W,n(o).isActive]]),t[19]||(t[19]=e("label",{for:"isActive",class:"text-sm font-medium text-gray-700"},"Active",-1))])]),e("div",Le,[e("button",{onClick:k,type:"button",class:"btn-secondary"},"Cancel"),e("button",{type:"submit",disabled:n(g),class:"btn-primary"},u(n(g)?"Saving...":"Save FAQ"),9,Te)])],32)])])])):x("",!0),n(a)?(r(),i("div",$e,[e("div",De,[t[20]||(t[20]=e("svg",{class:"w-5 h-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Ee,u(n(a)),1)])])):x("",!0),n(d)?(r(),i("div",Ue,[e("div",ze,[t[21]||(t[21]=e("svg",{class:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Ne,u(n(d)),1)])])):x("",!0)])}}};export{Ie as default};
