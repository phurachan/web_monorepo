import{_ as P}from"./DbuFvnLP.js";import{_ as U}from"./CNxelzV8.js";import{m as z,f as H,r as p,p as L,h as $,l as w,A as S,q as A,c,a as e,i as v,b as x,w as f,u as s,j as k,t as u,s as D,v as C,x as T,o as m,d as N}from"#entry";import{u as F}from"./b2E7qtaH.js";import{a as q}from"./BDG_tvSz.js";const J={class:"min-h-screen bg-gray-50"},R={class:"bg-white shadow-sm border-b"},G={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},W={class:"flex justify-between items-center py-4"},K={class:"flex items-center space-x-4"},Q={class:"flex items-center space-x-4"},X={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Y={key:0,class:"flex justify-center items-center h-64"},Z={key:1,class:"card p-4 mb-8"},ee={class:"flex items-center justify-between"},te={class:"flex items-center bg-gray-100 rounded-lg p-1"},se={class:"text-sm text-gray-500 mt-2"},oe={class:"card p-6"},ne={class:"space-y-6"},ae={class:"relative"},le={class:"floating-label"},re={class:"relative"},ie={class:"floating-label"},de={class:"flex justify-end space-x-4"},ce=["disabled"],ue={key:0,class:"fixed top-20 right-4 p-4 bg-green-50 border border-green-200 rounded-lg shadow-xl z-50"},me={class:"flex items-center"},pe={class:"text-green-700 font-medium"},ge={key:1,class:"fixed top-20 right-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow-xl z-50"},he={class:"flex items-center"},xe={class:"text-red-700 font-medium"},Se={__name:"services-content",async setup(be){let g,y;const{logout:E}=z(),{getSiteSettings:M}=F(),I=([g,y]=H(()=>M()),g=await g,y(),g),a=p("en"),n=L({heroTitle:{en:"",th:""},heroSubtitle:{en:"",th:""},heroImage:""}),b=p(!0),h=p(!1),r=p(""),l=p("");$(async()=>{await V()});const _=(o,t)=>{try{const i=JSON.parse(o||"{}");return typeof i=="object"&&i!==null?i:t}catch{return t}},V=async()=>{try{const o=await $fetch(w(S.CMS.SERVICES_CONTENT.GET));o&&(n.heroTitle=_(o.heroTitle,{en:"",th:""}),n.heroSubtitle=_(o.heroSubtitle,{en:"",th:""}),n.heroImage=o.heroImage||"")}catch(o){l.value="Failed to load content",console.error("Failed to load content:",o)}finally{b.value=!1}},j=async()=>{h.value=!0,r.value="",l.value="";try{const o={heroTitle:JSON.stringify(n.heroTitle),heroSubtitle:JSON.stringify(n.heroSubtitle),heroImage:n.heroImage};await $fetch(w(S.CMS.SERVICES_CONTENT.POST),{method:"POST",body:o}),r.value="Services page content updated successfully!"}catch(o){l.value="Failed to update content. Please try again.",console.error("Failed to update content:",o)}finally{h.value=!1}},B=async()=>{await E()};return A([r,l],()=>{(r.value||l.value)&&setTimeout(()=>{r.value="",l.value=""},5e3)}),q({title:`Edit Services Page | ${I.siteName} CMS`,robots:"noindex, nofollow"}),(o,t)=>{const i=P,O=U;return m(),c("div",J,[e("nav",R,[e("div",G,[e("div",W,[e("div",K,[x(i,{to:"/agency-cms/manage",class:"text-blue-600 hover:text-blue-500"},{default:f(()=>[...t[5]||(t[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),t[6]||(t[6]=e("h1",{class:"text-xl font-semibold text-gray-900"},"Edit Services Page",-1))]),e("div",Q,[x(i,{to:"/agency-cms/services",target:"_blank",class:"btn-secondary"},{default:f(()=>[...t[7]||(t[7]=[N("View Live",-1)])]),_:1}),e("button",{onClick:B,class:"btn-secondary"},"Logout")])])])]),e("div",X,[s(b)?(m(),c("div",Y,[...t[8]||(t[8]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(m(),c("div",Z,[e("div",ee,[t[9]||(t[9]=e("h3",{class:"text-lg font-medium text-gray-900"},"Content Language",-1)),e("div",te,[e("button",{onClick:t[0]||(t[0]=d=>a.value="en"),type:"button",class:k([s(a)==="en"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900","px-4 py-2 rounded-md text-sm font-medium transition-colors"])}," 🇺🇸 English ",2),e("button",{onClick:t[1]||(t[1]=d=>a.value="th"),type:"button",class:k([s(a)==="th"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900","px-4 py-2 rounded-md text-sm font-medium transition-colors"])}," 🇹🇭 ไทย ",2)])]),e("p",se," Switch between languages to edit content. "+u(s(a)==="en"?"Editing English content":"กำลังแก้ไขเนื้อหาภาษาไทย"),1)])),s(b)?v("",!0):(m(),c("form",{key:2,onSubmit:D(j,["prevent"]),class:"space-y-8"},[e("div",oe,[t[11]||(t[11]=e("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Hero Section",-1)),e("div",ne,[e("div",ae,[C(e("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>s(n).heroTitle[s(a)]=d),type:"text",placeholder:" ",class:"form-input peer",required:""},null,512),[[T,s(n).heroTitle[s(a)]]]),e("label",le,"Hero Title ("+u(s(a).toUpperCase())+")",1)]),e("div",re,[C(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=d=>s(n).heroSubtitle[s(a)]=d),placeholder:" ",rows:"3",class:"form-input resize-none peer",required:""},null,512),[[T,s(n).heroSubtitle[s(a)]]]),e("label",ie,"Hero Subtitle ("+u(s(a).toUpperCase())+")",1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"form-label"},"Hero Background Image",-1)),x(O,{modelValue:s(n).heroImage,"onUpdate:modelValue":t[4]||(t[4]=d=>s(n).heroImage=d),label:"Hero Section Background (optional)","help-text":"Recommended: High-quality image, 1920x1080px or larger. Will be used as background for the hero section."},null,8,["modelValue"])])])]),e("div",de,[x(i,{to:"/agency-cms/manage",class:"btn-secondary"},{default:f(()=>[...t[12]||(t[12]=[N("Cancel",-1)])]),_:1}),e("button",{type:"submit",disabled:s(h),class:"btn-primary"},u(s(h)?"Saving...":"Save Changes"),9,ce)])],32))]),s(r)?(m(),c("div",ue,[e("div",me,[t[13]||(t[13]=e("svg",{class:"w-5 h-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",pe,u(s(r)),1)])])):v("",!0),s(l)?(m(),c("div",ge,[e("div",he,[t[14]||(t[14]=e("svg",{class:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",xe,u(s(l)),1)])])):v("",!0)])}}};export{Se as default};
