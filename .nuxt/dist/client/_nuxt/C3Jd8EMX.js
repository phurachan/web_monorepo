import{_ as L}from"./DbuFvnLP.js";import{_ as H}from"./CNxelzV8.js";import{m as q,f as z,r as x,p as I,h as J,l as N,A as E,q as $,c as i,a as e,i as C,b as h,w as k,u as s,j as M,t as d,s as D,v as p,x as g,F as G,k as R,o as u,d as V}from"#entry";import{u as W}from"./b2E7qtaH.js";import{a as K}from"./BDG_tvSz.js";const Q={class:"min-h-screen bg-gray-50"},X={class:"bg-white shadow-sm border-b"},Y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Z={class:"flex justify-between items-center py-4"},ee={class:"flex items-center space-x-4"},te={class:"flex items-center space-x-4"},se={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},oe={key:0,class:"flex justify-center items-center h-64"},ae={key:1,class:"card p-4 mb-8"},le={class:"flex items-center justify-between"},ne={class:"flex items-center bg-gray-100 rounded-lg p-1"},re={class:"text-sm text-gray-500 mt-2"},ie={class:"card p-6"},de={class:"card p-6"},ue={class:"card p-6"},me={class:"space-y-6"},ce={class:"relative"},pe={class:"floating-label"},ge={class:"relative"},be={class:"floating-label"},xe={class:"card p-6"},he={class:"space-y-6"},fe={class:"relative"},ye={class:"relative"},ve={class:"relative"},_e={class:"floating-label"},we={class:"card p-6"},Ce={class:"space-y-4"},ke={class:"w-24"},Se={class:"text-sm font-medium text-gray-700"},Ue={class:"flex-1"},Ie=["onUpdate:modelValue"],Ne={class:"card p-6"},Ee={class:"space-y-4"},Me={class:"relative"},Ve={class:"flex justify-end space-x-4"},Te=["disabled"],Oe={key:0,class:"fixed top-20 right-4 p-4 bg-green-50 border border-green-200 rounded-lg shadow-xl z-50"},Pe={class:"flex items-center"},Be={class:"text-green-700 font-medium"},je={key:1,class:"fixed top-20 right-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow-xl z-50"},Ae={class:"flex items-center"},Fe={class:"text-red-700 font-medium"},De={__name:"contact",async setup(Le){let f,S;const{logout:T}=q(),{getSiteSettings:O}=W(),P=([f,S]=z(()=>O()),f=await f,S(),f),n=x("en"),o=I({title:{en:"",th:""},subtitle:{en:"",th:""},address:{en:"",th:""},phone:"",email:"",mapEmbedUrl:"",bannerImage:"",heroImage:""}),b=I({Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sunday:""}),_=x(!0),y=x(!1),m=x(""),r=x("");J(async()=>{await B()});const w=(a,t)=>{try{const c=JSON.parse(a||"{}");return typeof c=="object"&&c!==null?c:t}catch{return t}},B=async()=>{try{const a=await $fetch(N(E.CMS.CONTACT_CONTENT.GET));if(a&&(o.title=w(a.title,{en:"",th:""}),o.subtitle=w(a.subtitle,{en:"",th:""}),o.address=w(a.address,{en:"",th:""}),o.phone=a.phone||"",o.email=a.email||"",o.mapEmbedUrl=a.mapEmbedUrl||"",o.heroImage=a.heroImage||"",o.bannerImage=a.bannerImage||"",a.businessHours))try{const t=JSON.parse(a.businessHours);Object.assign(b,t)}catch(t){console.error("Failed to parse business hours:",t)}}catch(a){r.value="Failed to load content",console.error("Failed to load content:",a)}finally{_.value=!1}},j=async()=>{y.value=!0,m.value="",r.value="";try{const a={title:JSON.stringify(o.title),subtitle:JSON.stringify(o.subtitle),address:JSON.stringify(o.address),phone:o.phone,email:o.email,mapEmbedUrl:o.mapEmbedUrl,heroImage:o.heroImage,bannerImage:o.bannerImage,businessHours:JSON.stringify(b)};await $fetch(N(E.CMS.CONTACT_CONTENT.POST),{method:"POST",body:a}),m.value="Contact page content updated successfully!"}catch(a){r.value="Failed to update content. Please try again.",console.error("Failed to update content:",a)}finally{y.value=!1}},A=async()=>{await T()};return $([m,r],()=>{(m.value||r.value)&&setTimeout(()=>{m.value="",r.value=""},5e3)}),K({title:`Edit Contact Page | ${P.siteName} CMS`,robots:"noindex, nofollow"}),(a,t)=>{const c=L,U=H;return u(),i("div",Q,[e("nav",X,[e("div",Y,[e("div",Z,[e("div",ee,[h(c,{to:"/agency-cms/manage",class:"text-blue-600 hover:text-blue-500"},{default:k(()=>[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),t[11]||(t[11]=e("h1",{class:"text-xl font-semibold text-gray-900"},"Edit Contact Page",-1))]),e("div",te,[h(c,{to:"/agency-cms/contact",target:"_blank",class:"btn-secondary"},{default:k(()=>[...t[12]||(t[12]=[V("View Live",-1)])]),_:1}),e("button",{onClick:A,class:"btn-secondary"},"Logout")])])])]),e("div",se,[s(_)?(u(),i("div",oe,[...t[13]||(t[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(u(),i("div",ae,[e("div",le,[t[14]||(t[14]=e("h3",{class:"text-lg font-medium text-gray-900"},"Content Language",-1)),e("div",ne,[e("button",{onClick:t[0]||(t[0]=l=>n.value="en"),type:"button",class:M([s(n)==="en"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900","px-4 py-2 rounded-md text-sm font-medium transition-colors"])}," ðŸ‡ºðŸ‡¸ English ",2),e("button",{onClick:t[1]||(t[1]=l=>n.value="th"),type:"button",class:M([s(n)==="th"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900","px-4 py-2 rounded-md text-sm font-medium transition-colors"])}," ðŸ‡¹ðŸ‡­ à¹„à¸—à¸¢ ",2)])]),e("p",re," Switch between languages to edit content. "+d(s(n)==="en"?"Editing English content":"à¸à¸³à¸¥à¸±à¸‡à¹à¸à¹‰à¹„à¸‚à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸ à¸²à¸©à¸²à¹„à¸—à¸¢"),1)])),s(_)?C("",!0):(u(),i("form",{key:2,onSubmit:D(j,["prevent"]),class:"space-y-8"},[e("div",ie,[t[15]||(t[15]=e("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Banner Image",-1)),h(U,{modelValue:s(o).bannerImage,"onUpdate:modelValue":t[2]||(t[2]=l=>s(o).bannerImage=l),label:"Contact Page Banner (optional)"},null,8,["modelValue"])]),e("div",de,[t[16]||(t[16]=e("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Hero Background Image",-1)),h(U,{modelValue:s(o).heroImage,"onUpdate:modelValue":t[3]||(t[3]=l=>s(o).heroImage=l),label:"Hero Section Background (optional)","help-text":"Recommended: High-quality image, 1920x1080px or larger. Will be used as background for the hero section."},null,8,["modelValue"])]),e("div",ue,[t[17]||(t[17]=e("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Page Content",-1)),e("div",me,[e("div",ce,[p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s(o).title[s(n)]=l),type:"text",placeholder:" ",class:"form-input peer",required:""},null,512),[[g,s(o).title[s(n)]]]),e("label",pe,"Page Title ("+d(s(n).toUpperCase())+")",1)]),e("div",ge,[p(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=l=>s(o).subtitle[s(n)]=l),placeholder:" ",rows:"3",class:"form-input resize-none peer",required:""},null,512),[[g,s(o).subtitle[s(n)]]]),e("label",be,"Page Subtitle ("+d(s(n).toUpperCase())+")",1)])])]),e("div",xe,[t[20]||(t[20]=e("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Contact Information",-1)),e("div",he,[e("div",fe,[p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>s(o).phone=l),type:"tel",placeholder:" ",class:"form-input peer",required:""},null,512),[[g,s(o).phone]]),t[18]||(t[18]=e("label",{class:"floating-label"},"Phone Number",-1))]),e("div",ye,[p(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>s(o).email=l),type:"email",placeholder:" ",class:"form-input peer",required:""},null,512),[[g,s(o).email]]),t[19]||(t[19]=e("label",{class:"floating-label"},"Email Address",-1))]),e("div",ve,[p(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=l=>s(o).address[s(n)]=l),placeholder:" ",rows:"3",class:"form-input resize-none peer",required:""},null,512),[[g,s(o).address[s(n)]]]),e("label",_e,"Physical Address ("+d(s(n).toUpperCase())+")",1)])])]),e("div",we,[t[21]||(t[21]=e("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Business Hours",-1)),e("div",Ce,[(u(!0),i(G,null,R(s(b),(l,v)=>(u(),i("div",{key:v,class:"flex items-center space-x-4"},[e("div",ke,[e("label",Se,d(v),1)]),e("div",Ue,[p(e("input",{"onUpdate:modelValue":F=>s(b)[v]=F,type:"text",placeholder:"e.g., 9:00 AM - 5:00 PM or Closed",class:"form-input"},null,8,Ie),[[g,s(b)[v]]])])]))),128))])]),e("div",Ne,[t[24]||(t[24]=e("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Map Integration",-1)),e("div",Ee,[e("div",Me,[p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>a.form.mapEmbedUrl=l),type:"url",placeholder:" ",class:"form-input peer"},null,512),[[g,a.form.mapEmbedUrl]]),t[22]||(t[22]=e("label",{class:"floating-label"},"Google Maps Embed URL (optional)",-1))]),t[23]||(t[23]=e("p",{class:"text-sm text-gray-600"},' Go to Google Maps, search for your location, click "Share" â†’ "Embed a map" and paste the src URL here. ',-1))])]),e("div",Ve,[h(c,{to:"/agency-cms/manage",class:"btn-secondary"},{default:k(()=>[...t[25]||(t[25]=[V("Cancel",-1)])]),_:1}),e("button",{type:"submit",disabled:s(y),class:"btn-primary"},d(s(y)?"Saving...":"Save Changes"),9,Te)])],32))]),s(m)?(u(),i("div",Oe,[e("div",Pe,[t[26]||(t[26]=e("svg",{class:"w-5 h-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Be,d(s(m)),1)])])):C("",!0),s(r)?(u(),i("div",je,[e("div",Ae,[t[27]||(t[27]=e("svg",{class:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Fe,d(s(r)),1)])])):C("",!0)])}}};export{De as default};
