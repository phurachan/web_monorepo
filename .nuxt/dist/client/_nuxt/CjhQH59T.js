import{_ as X}from"./DbuFvnLP.js";import{_ as Y}from"./CNxelzV8.js";import{m as Z,f as ee,r as v,p as te,h as se,l as b,A as h,q as oe,c as n,a as e,i as y,b as M,w as B,u as o,F as V,k as E,t as u,j as U,s as le,v as f,x,B as re,o as a,d as ne,n as D}from"#entry";import{u as ae}from"./b2E7qtaH.js";import{a as ie}from"./BDG_tvSz.js";const de={class:"min-h-screen bg-gray-50"},ue={class:"bg-white shadow-sm border-b"},ce={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},pe={class:"flex justify-between items-center py-4"},me={class:"flex items-center space-x-4"},ve={class:"flex items-center space-x-4"},fe={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},xe={key:0,class:"flex justify-center items-center h-64"},ge={key:1,class:"space-y-6"},ye={class:"flex items-start justify-between"},be={class:"flex-1"},he={class:"flex items-center space-x-3 mb-3"},we={class:"text-xl font-bold text-gray-900"},ke={key:0,class:"px-2 py-1 bg-gray-200 text-gray-600 text-xs rounded-full"},_e={class:"text-gray-600 mb-4"},Se={key:0,class:"mb-4"},Ce={class:"flex flex-wrap gap-2"},Ae={class:"flex items-center space-x-4 text-sm text-gray-500"},Me={class:"flex items-center space-x-2 ml-4"},Ve=["onClick"],Ee=["onClick"],Ue={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Fe=["onClick"],Ne={key:0,class:"text-center py-12"},$e={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Le={class:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Te={class:"p-6"},Be={class:"flex justify-between items-center mb-6"},De={class:"text-xl font-bold text-gray-900"},Ie={class:"bg-gray-50 p-4 rounded-lg mb-6"},Oe={class:"flex items-center justify-between"},ze={class:"flex items-center bg-white rounded-lg p-1 border"},Pe={class:"relative"},Je={class:"floating-label"},He={class:"relative"},Re={class:"floating-label"},qe={class:"relative"},Ge={class:"flex items-center space-x-4"},We={class:"relative"},Ke={class:"flex-1"},Qe={class:"block text-sm font-medium text-gray-700 mb-2"},Xe={class:"space-y-2"},Ye=["onUpdate:modelValue","placeholder"],Ze=["onClick"],et={class:"grid grid-cols-2 gap-4"},tt={class:"relative"},st={class:"flex items-center space-x-3"},ot={class:"flex justify-end space-x-4 pt-4 border-t"},lt=["disabled"],rt={key:1,class:"fixed top-20 right-4 p-4 bg-green-50 border border-green-200 rounded-lg shadow-xl z-50"},nt={class:"flex items-center"},at={class:"text-green-700 font-medium"},it={key:2,class:"fixed top-20 right-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow-xl z-50"},dt={class:"flex items-center"},ut={class:"text-red-700 font-medium"},gt={__name:"services",async setup(ct){let w,j;const{logout:I}=Z(),{getSiteSettings:O}=ae(),z=([w,j]=ee(()=>O()),w=await w,j(),w),C=v([]),F=v(!0),k=v(!1),_=v(!1),g=v(null),p=v(""),m=v(""),i=v("en"),s=te({title:{en:"",th:""},description:{en:"",th:""},features:[{en:"",th:""}],icon:"",image:"",color:"#6495ed",order:0,isActive:!0}),N=(r,t)=>{try{const d=JSON.parse(r||"{}");return typeof d=="object"&&d!==null?d:t}catch{return t}};se(async()=>{await S()});const S=async()=>{try{const r=await $fetch(b(h.CMS.SERVICES.GET));C.value=r.map(t=>({...t,features:typeof t.features=="string"?JSON.parse(t.features):Array.isArray(t.features)?t.features:[]}))}catch{m.value="Failed to load services"}finally{F.value=!1}},$=()=>{g.value=null,L(),_.value=!0},P=r=>{g.value=r,s.title=N(r.title,{en:"",th:""}),s.description=N(r.description,{en:"",th:""});const t=typeof r.features=="string"?JSON.parse(r.features):r.features;t.length>0?s.features=t.map(d=>typeof d=="object"?d:{en:d||"",th:""}):s.features=[{en:"",th:""}],s.icon=r.icon||"",s.image=r.image||"",s.color=r.color||"#6495ed",s.order=r.order,s.isActive=r.isActive,i.value="en",_.value=!0},A=()=>{_.value=!1,g.value=null,L()},L=()=>{s.title={en:"",th:""},s.description={en:"",th:""},s.features=[{en:"",th:""}],s.icon="",s.image="",s.color="#6495ed",s.order=0,s.isActive=!0,i.value="en"},J=()=>{s.features.push({en:"",th:""})},H=r=>{s.features.length>1&&s.features.splice(r,1)},R=async()=>{k.value=!0,p.value="",m.value="";try{const r=s.features.filter(d=>d.en.trim()||d.th.trim()),t={title:JSON.stringify(s.title),description:JSON.stringify(s.description),features:JSON.stringify(r),icon:s.icon,image:s.image,color:s.color,order:s.order,isActive:s.isActive};g.value?(await $fetch(b(h.CMS.SERVICES.PUT(g.value.id)),{method:"PUT",body:t}),p.value="Service updated successfully!"):(await $fetch(b(h.CMS.SERVICES.POST),{method:"POST",body:t}),p.value="Service created successfully!"),A(),await S()}catch{m.value="Failed to save service"}finally{k.value=!1}},q=async r=>{try{await $fetch(b(h.CMS.SERVICES.PUT(r.id)),{method:"PUT",body:{...r,features:r.features,isActive:!r.isActive}}),p.value=`Service ${r.isActive?"deactivated":"activated"} successfully!`,await S()}catch{m.value="Failed to update service status"}},G=async r=>{if(confirm(`Are you sure you want to delete "${r.title}"?`))try{await $fetch(b(h.CMS.SERVICES.DELETE(r.id)),{method:"DELETE"}),p.value="Service deleted successfully!",await S()}catch{m.value="Failed to delete service"}},W=r=>new Date(r).toLocaleDateString(),K=async()=>{await I()};return oe([p,m],()=>{(p.value||m.value)&&setTimeout(()=>{p.value="",m.value=""},5e3)}),ie({title:`Manage Services | ${z.siteName} CMS`,robots:"noindex, nofollow"}),(r,t)=>{const d=X,Q=Y;return a(),n("div",de,[e("nav",ue,[e("div",ce,[e("div",pe,[e("div",me,[M(d,{to:"/agency-cms/manage",class:"text-blue-600 hover:text-blue-500"},{default:B(()=>[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),t[11]||(t[11]=e("h1",{class:"text-xl font-semibold text-gray-900"},"Manage Services",-1))]),e("div",ve,[e("button",{onClick:$,class:"btn-primary"},"Add Service"),M(d,{to:"/agency-cms/services",target:"_blank",class:"btn-secondary"},{default:B(()=>[...t[12]||(t[12]=[ne("View Live",-1)])]),_:1}),e("button",{onClick:K,class:"btn-secondary"},"Logout")])])])]),e("div",fe,[o(F)?(a(),n("div",xe,[...t[13]||(t[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(a(),n("div",ge,[(a(!0),n(V,null,E(o(C),l=>(a(),n("div",{key:l.id,class:"card p-6"},[e("div",ye,[e("div",be,[e("div",he,[e("div",{class:"w-4 h-4 rounded-full border-2 border-white shadow",style:D({backgroundColor:l.color||"#6495ed"})},null,4),e("h3",we,u(l.title),1),l.isActive?y("",!0):(a(),n("span",ke,"Inactive"))]),e("p",_e,u(l.description),1),l.features?.length?(a(),n("div",Se,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Features:",-1)),e("div",Ce,[(a(!0),n(V,null,E(l.features,c=>(a(),n("span",{key:c,class:"px-3 py-1 text-sm rounded-full text-white",style:D({backgroundColor:l.color||"#6495ed",opacity:.9})},u(c),5))),128))])])):y("",!0),e("div",Ae,[e("span",null,"Order: "+u(l.order),1),t[15]||(t[15]=e("span",null,"â€¢",-1)),e("span",null,"Updated: "+u(W(l.updatedAt)),1)])]),e("div",Me,[e("button",{onClick:c=>P(l),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg"},[...t[16]||(t[16]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ve),e("button",{onClick:c=>q(l),class:U([l.isActive?"text-yellow-600 hover:bg-yellow-50":"text-green-600 hover:bg-green-50","p-2 rounded-lg"])},[l.isActive?(a(),n("svg",Ue,[...t[17]||(t[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"},null,-1)])])):(a(),n("svg",je,[...t[18]||(t[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))],10,Ee),e("button",{onClick:c=>G(l),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg"},[...t[19]||(t[19]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Fe)])])]))),128)),o(C).length===0?(a(),n("div",Ne,[t[20]||(t[20]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[21]||(t[21]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No services",-1)),t[22]||(t[22]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating your first service.",-1)),e("button",{onClick:$,class:"btn-primary mt-4"},"Add Service")])):y("",!0)]))]),o(_)?(a(),n("div",$e,[e("div",Le,[e("div",Te,[e("div",Be,[e("h2",De,u(o(g)?"Edit Service":"Add New Service"),1),e("button",{onClick:A,class:"text-gray-400 hover:text-gray-600"},[...t[23]||(t[23]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ie,[e("div",Oe,[t[24]||(t[24]=e("h3",{class:"text-sm font-medium text-gray-900"},"Content Language",-1)),e("div",ze,[e("button",{onClick:t[0]||(t[0]=l=>i.value="en"),type:"button",class:U([o(i)==="en"?"bg-blue-100 text-blue-600":"text-gray-600 hover:text-gray-900","px-3 py-1 rounded-md text-xs font-medium transition-colors"])}," ðŸ‡ºðŸ‡¸ EN ",2),e("button",{onClick:t[1]||(t[1]=l=>i.value="th"),type:"button",class:U([o(i)==="th"?"bg-blue-100 text-blue-600":"text-gray-600 hover:text-gray-900","px-3 py-1 rounded-md text-xs font-medium transition-colors"])}," ðŸ‡¹ðŸ‡­ TH ",2)])])]),e("form",{onSubmit:le(R,["prevent"]),class:"space-y-6"},[e("div",Pe,[f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o(s).title[o(i)]=l),type:"text",placeholder:" ",class:"form-input peer",required:""},null,512),[[x,o(s).title[o(i)]]]),e("label",Je,"Service Title ("+u(o(i).toUpperCase())+")",1)]),e("div",He,[f(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=l=>o(s).description[o(i)]=l),placeholder:" ",rows:"3",class:"form-input resize-none peer",required:""},null,512),[[x,o(s).description[o(i)]]]),e("label",Re,"Description ("+u(o(i).toUpperCase())+")",1)]),e("div",qe,[f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o(s).icon=l),type:"text",placeholder:" ",class:"form-input peer"},null,512),[[x,o(s).icon]]),t[25]||(t[25]=e("label",{class:"floating-label"},"Icon Name (e.g., search, social, code)",-1))]),e("div",null,[t[26]||(t[26]=e("label",{class:"form-label"},"Service Image",-1)),M(Q,{modelValue:o(s).image,"onUpdate:modelValue":t[5]||(t[5]=l=>o(s).image=l),label:"Service Image (optional)","help-text":"Optional image for the service. Will be displayed in service cards and details."},null,8,["modelValue"])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Card Color",-1)),e("div",Ge,[e("div",We,[f(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>o(s).color=l),type:"color",class:"w-16 h-16 border-2 border-gray-300 rounded-lg cursor-pointer"},null,512),[[x,o(s).color]])]),e("div",Ke,[f(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>o(s).color=l),type:"text",placeholder:"#6495ed",class:"form-input",pattern:"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"},null,512),[[x,o(s).color]]),t[27]||(t[27]=e("p",{class:"text-xs text-gray-500 mt-1"},"This color will be used for the service card's accent color",-1))])])]),e("div",null,[e("label",Qe,"Features ("+u(o(i).toUpperCase())+")",1),e("div",Xe,[(a(!0),n(V,null,E(o(s).features,(l,c)=>(a(),n("div",{key:c,class:"flex space-x-2"},[f(e("input",{"onUpdate:modelValue":T=>o(s).features[c][o(i)]=T,type:"text",class:"form-input flex-1",placeholder:`Feature ${c+1} (${o(i).toUpperCase()})`},null,8,Ye),[[x,o(s).features[c][o(i)]]]),e("button",{onClick:T=>H(c),type:"button",class:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg"},[...t[29]||(t[29]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ze)]))),128)),e("button",{onClick:J,type:"button",class:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-gray-400 hover:text-gray-600"}," + Add Feature ")])]),e("div",et,[e("div",tt,[f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>o(s).order=l),type:"number",placeholder:" ",class:"form-input peer",min:"0"},null,512),[[x,o(s).order,void 0,{number:!0}]]),t[30]||(t[30]=e("label",{class:"floating-label"},"Display Order",-1))]),e("div",st,[f(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>o(s).isActive=l),type:"checkbox",id:"isActive",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[re,o(s).isActive]]),t[31]||(t[31]=e("label",{for:"isActive",class:"text-sm font-medium text-gray-700"},"Active",-1))])]),e("div",ot,[e("button",{onClick:A,type:"button",class:"btn-secondary"},"Cancel"),e("button",{type:"submit",disabled:o(k),class:"btn-primary"},u(o(k)?"Saving...":"Save Service"),9,lt)])],32)])])])):y("",!0),o(p)?(a(),n("div",rt,[e("div",nt,[t[32]||(t[32]=e("svg",{class:"w-5 h-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",at,u(o(p)),1)])])):y("",!0),o(m)?(a(),n("div",it,[e("div",dt,[t[33]||(t[33]=e("svg",{class:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",ut,u(o(m)),1)])])):y("",!0)])}}};export{gt as default};
