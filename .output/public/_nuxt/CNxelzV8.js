import{H as _,r as n,c as s,o,a,i as c,t as v,j as I,s as b,u as i,e as V,l as C,A as D}from"#entry";const E={class:"space-y-4"},U={class:"flex items-center justify-between"},M={class:"block text-sm font-medium text-gray-700"},P={key:1,class:"relative"},B=["src","alt"],N={class:"relative"},j=["value"],A={key:2,class:"flex items-center space-x-2"},F={key:3,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},S={class:"text-red-700 text-sm"},L=_({__name:"ImageUpload",props:{modelValue:{},label:{default:"Image"}},emits:["update:modelValue"],setup(T,{emit:h}){const u=h,p=n(),d=n(!1),l=n(""),m=n(!1),f=()=>{p.value?.click()},y=e=>{const t=e.target;t.files&&t.files[0]&&g(t.files[0])},x=e=>{m.value=!1,e.dataTransfer?.files&&e.dataTransfer.files[0]&&g(e.dataTransfer.files[0])},g=async e=>{l.value="",d.value=!0;try{if(!e.type.startsWith("image/"))throw new Error("Please select an image file");if(e.size>5*1024*1024)throw new Error("File too large. Maximum size is 5MB");const t=new FormData;t.append("file",e);const r=await $fetch(C(D.UPLOAD.IMAGE),{method:"POST",body:t});if(r.success)u("update:modelValue",r.url);else throw new Error("Upload failed")}catch(t){l.value=t.message||"Upload failed"}finally{d.value=!1}},k=()=>{u("update:modelValue","")},w=e=>{const t=e.target;t.src="https://via.placeholder.com/400x200/f3f4f6/9ca3af?text=Invalid+Image"};return(e,t)=>(o(),s("div",E,[a("div",U,[a("label",M,v(e.label),1),e.modelValue?(o(),s("button",{key:0,onClick:k,type:"button",class:"text-sm text-red-600 hover:text-red-500"}," Remove ")):c("",!0)]),e.modelValue?(o(),s("div",P,[a("img",{src:e.modelValue,alt:e.label,class:"w-full h-48 object-cover rounded-lg border",onError:w},null,40,B),a("div",{class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center"},[a("button",{onClick:f,class:"bg-white text-gray-900 px-4 py-2 rounded-lg text-sm font-medium"}," Change Image ")])])):(o(),s("div",{key:0,onClick:f,onDragover:t[0]||(t[0]=b(()=>{},["prevent"])),onDrop:b(x,["prevent"]),class:I(["border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 cursor-pointer transition-colors",{"border-blue-400 bg-blue-50":i(m)}])},[...t[2]||(t[2]=[V('<svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><div class="mt-2"><p class="text-sm text-gray-600"><span class="font-medium text-blue-600">Click to upload</span> or drag and drop </p><p class="text-xs text-gray-500">PNG, JPG, GIF up to 5MB</p></div>',2)])],34)),a("div",N,[a("input",{value:e.modelValue,onInput:t[1]||(t[1]=r=>e.$emit("update:modelValue",r.target?.value)),type:"text",placeholder:"Or enter image URL",class:"form-input"},null,40,j)]),a("input",{ref_key:"fileInput",ref:p,type:"file",accept:"image/*",onChange:y,class:"hidden"},null,544),i(d)?(o(),s("div",A,[...t[3]||(t[3]=[a("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"},null,-1),a("span",{class:"text-sm text-gray-600"},"Uploading...",-1)])])):c("",!0),i(l)?(o(),s("div",F,[a("p",S,v(i(l)),1)])):c("",!0)]))}});export{L as _};
