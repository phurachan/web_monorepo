import{_ as C}from"./DbuFvnLP.js";import{H as h,m as S,r as g,h as w,c as i,o as d,a as t,d as o,t as l,u as n,i as b,b as x,w as f,l as P,A as E}from"#entry";import{u as A}from"./IEGI5U38.js";import{a as I}from"./BDG_tvSz.js";const L={class:"min-h-screen bg-gray-100 p-8"},V={class:"max-w-2xl mx-auto"},_={class:"space-y-6"},B={class:"card p-6"},D={class:"card p-6"},M={class:"card p-6"},O={key:0,class:"mt-4 p-4 bg-gray-50 rounded"},U={key:1,class:"mt-4 p-4 bg-red-50 text-red-700 rounded"},G={class:"card p-6"},j=h({__name:"test-auth",setup(H){const{user:k,isAuthenticated:v,isLoading:y,checkAuth:c}=S(),a=A("auth-token"),p=A("auth-status"),u=g(null),r=g(null),N=async()=>{u.value=null,r.value=null;try{const e=await $fetch(P(E.AUTH.ME));u.value=e}catch(e){r.value=e.data||e.message||e}},T=()=>{a.value=null,p.value=null};return w(()=>{c()}),I({title:"Auth Test | DigitalFlow",robots:"noindex, nofollow"}),(e,s)=>{const m=C;return d(),i("div",L,[t("div",V,[s[15]||(s[15]=t("h1",{class:"text-3xl font-bold mb-8"},"Authentication Test Page",-1)),t("div",_,[t("div",B,[s[4]||(s[4]=t("h2",{class:"text-xl font-bold mb-4"},"Cookie Status",-1)),t("p",null,[s[0]||(s[0]=t("strong",null,"Auth Token (httpOnly):",-1)),o(" "+l(!!n(a)),1)]),t("p",null,[s[1]||(s[1]=t("strong",null,"Auth Status (accessible):",-1)),o(" "+l(n(p)||"None"),1)]),t("p",null,[s[2]||(s[2]=t("strong",null,"Token Length:",-1)),o(" "+l(n(a)?.length||0),1)]),t("p",null,[s[3]||(s[3]=t("strong",null,"Token Preview:",-1)),o(" "+l(n(a)?.substring(0,20)||"None"),1)])]),t("div",D,[s[8]||(s[8]=t("h2",{class:"text-xl font-bold mb-4"},"Auth State",-1)),t("p",null,[s[5]||(s[5]=t("strong",null,"Is Authenticated:",-1)),o(" "+l(n(v)),1)]),t("p",null,[s[6]||(s[6]=t("strong",null,"User Email:",-1)),o(" "+l(n(k)?.email||"None"),1)]),t("p",null,[s[7]||(s[7]=t("strong",null,"Loading:",-1)),o(" "+l(n(y)),1)])]),t("div",M,[s[11]||(s[11]=t("h2",{class:"text-xl font-bold mb-4"},"API Test",-1)),t("button",{onClick:N,class:"btn-primary mr-4"},"Test /api/auth/me"),t("button",{onClick:T,class:"btn-secondary"},"Clear Cookie"),n(u)?(d(),i("div",O,[s[9]||(s[9]=t("p",null,[t("strong",null,"API Result:")],-1)),t("pre",null,l(JSON.stringify(n(u),null,2)),1)])):b("",!0),n(r)?(d(),i("div",U,[s[10]||(s[10]=t("p",null,[t("strong",null,"API Error:")],-1)),t("pre",null,l(n(r)),1)])):b("",!0)]),t("div",G,[s[14]||(s[14]=t("h2",{class:"text-xl font-bold mb-4"},"Navigation Test",-1)),x(m,{to:"/agency-cms/manage",class:"btn-primary mr-4"},{default:f(()=>[...s[12]||(s[12]=[o("Go to /manage",-1)])]),_:1}),x(m,{to:"/agency-cms/login",class:"btn-secondary"},{default:f(()=>[...s[13]||(s[13]=[o("Go to /login",-1)])]),_:1})])])])])}}});export{j as default};
